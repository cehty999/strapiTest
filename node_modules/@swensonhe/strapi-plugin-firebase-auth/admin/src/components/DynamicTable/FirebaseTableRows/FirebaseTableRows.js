"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __read = (this && this.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.FirebaseTableRows = void 0;
var react_1 = __importStar(require("react"));
var design_system_1 = require("@strapi/design-system");
var design_system_2 = require("@strapi/design-system");
var design_system_3 = require("@strapi/design-system");
var design_system_4 = require("@strapi/design-system");
var react_router_dom_1 = require("react-router-dom");
var react_intl_1 = require("react-intl");
var design_system_5 = require("@strapi/design-system");
var design_system_6 = require("@strapi/design-system");
var icons_1 = require("@strapi/icons");
var rx_1 = require("react-icons/rx");
var design_system_7 = require("@strapi/design-system");
var styled_components_1 = __importDefault(require("styled-components"));
var provider_1 = require("../../../utils/provider");
var TypographyMaxWidth = (0, styled_components_1.default)(design_system_7.Typography)(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  max-width: 300px;\n"], ["\n  max-width: 300px;\n"])));
var CellLink = (0, styled_components_1.default)(design_system_3.Td)(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  text-decoration: underline;\n  color: blue;\n  &:hover {\n    cursor: pointer;\n  }\n  & > span {\n    color: blue;\n  }\n"], ["\n  text-decoration: underline;\n  color: blue;\n  &:hover {\n    cursor: pointer;\n  }\n  & > span {\n    color: blue;\n  }\n"])));
var FirebaseTableRows = function (_a) {
    var rows = _a.rows, entriesToDelete = _a.entriesToDelete, onSelectRow = _a.onSelectRow, onResetPasswordClick = _a.onResetPasswordClick, onDeleteAccountClick = _a.onDeleteAccountClick;
    var _b = __read((0, react_1.useState)(rows), 2), rowsData = _b[0], setRowsData = _b[1];
    var _c = (0, react_router_dom_1.useHistory)(), push = _c.push, pathname = _c.location.pathname;
    var formatMessage = (0, react_intl_1.useIntl)().formatMessage;
    (0, react_1.useEffect)(function () {
        setRowsData(rows);
    }, [rows]);
    var history = (0, react_router_dom_1.useHistory)();
    return (react_1.default.createElement(react_1.default.Fragment, null,
        react_1.default.createElement(design_system_3.Tbody, null, rowsData.map(function (data) {
            var isChecked = entriesToDelete &&
                entriesToDelete.findIndex(function (id) { return id === data.id; }) !== -1;
            return (react_1.default.createElement(design_system_3.Tr, { key: data.uid },
                react_1.default.createElement(design_system_1.Box, { style: { paddingLeft: 4, paddingRight: 4 } },
                    react_1.default.createElement(design_system_5.BaseCheckbox, { "aria-label": formatMessage({
                            id: "app.component.table.select.one-entry",
                            defaultMessage: "Select {target}",
                        }), checked: isChecked, onChange: function (e) {
                            onSelectRow &&
                                onSelectRow({ name: data.id, value: e.target.checked });
                        } })),
                react_1.default.createElement(design_system_3.Td, { key: data.email, style: { padding: 16 } },
                    react_1.default.createElement(TypographyMaxWidth, { ellipsis: true, textColor: "neutral800" }, data.email)),
                react_1.default.createElement(CellLink, { key: data.uid, onClick: function () {
                        push({
                            pathname: "".concat(pathname, "/").concat(data.uid),
                            state: { from: pathname, strapiId: data.strapiId },
                        });
                    } },
                    react_1.default.createElement(TypographyMaxWidth, { ellipsis: true, textColor: "neutral800" }, data.uid)),
                react_1.default.createElement(design_system_3.Td, null,
                    react_1.default.createElement(provider_1.MapProviderToIcon, { providerData: data.providerData })),
                react_1.default.createElement(design_system_3.Td, null,
                    react_1.default.createElement(TypographyMaxWidth, { ellipsis: true, textColor: "neutral800" }, data.displayName)),
                react_1.default.createElement(design_system_3.Td, null, data.emailVerified ? (react_1.default.createElement(rx_1.RxCheck, { size: 24 })) : (react_1.default.createElement(rx_1.RxCross2, { size: 24 }))),
                react_1.default.createElement(design_system_3.Td, { key: data.disabled }, data.disabled ? react_1.default.createElement(rx_1.RxCheck, { size: 24 }) : react_1.default.createElement(rx_1.RxCross2, { size: 24 })),
                react_1.default.createElement(CellLink, { key: data.strapiId },
                    react_1.default.createElement(TypographyMaxWidth, { ellipsis: true, textColor: "neutral800" },
                        react_1.default.createElement(design_system_1.Box, { onClick: function () {
                                history.push("/content-manager/collectionType/plugin::users-permissions.user/".concat(data.strapiId));
                            } }, data.strapiId))),
                react_1.default.createElement(design_system_3.Td, { key: data.username },
                    react_1.default.createElement(TypographyMaxWidth, { ellipsis: true, textColor: "neutral800" }, data.username)),
                react_1.default.createElement(design_system_4.Flex, { alignItems: "center", paddingTop: 3, gap: 4 },
                    react_1.default.createElement(design_system_1.Box, { key: data.uid },
                        react_1.default.createElement(design_system_6.SimpleMenu, { label: "Actions", as: design_system_2.IconButton, icon: react_1.default.createElement(icons_1.CarretDown, null) },
                            react_1.default.createElement(design_system_6.MenuItem, { onClick: function () {
                                    onResetPasswordClick(data);
                                } }, "Reset Password"),
                            react_1.default.createElement(design_system_6.MenuItem, { onClick: function () {
                                    onDeleteAccountClick(data);
                                } }, "Delete Account"))))));
        }))));
};
exports.FirebaseTableRows = FirebaseTableRows;
var templateObject_1, templateObject_2;
//# sourceMappingURL=FirebaseTableRows.js.map